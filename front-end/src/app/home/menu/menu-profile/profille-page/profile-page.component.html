<ion-header>
  <ion-toolbar class="p-2">
    <div class="flex justify-between items-center py-2">
      <ion-buttons slot="start">
        <app-back-button [navigateBack]="goBack.bind(this)"></app-back-button>
      </ion-buttons>

      <ion-breadcrumbs [maxItems]="2" (ionCollapsedClick)="presentPopover($event)" [itemsBeforeCollapse]="0">
        <ion-breadcrumb
          *ngFor="let breadcrumb of breadcrumbsService.breadcrumbsRoutes()"
          [href]="breadcrumb.url"
        >
          {{ breadcrumb.label | breadcrumbLabel }}
        </ion-breadcrumb>
      </ion-breadcrumbs>
    </div>

    <ion-searchbar></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">
  <router-outlet></router-outlet>

  <ion-grid>
    <ion-row>
      @for (page of menuItems(); track page.value) {
        <ion-col size="6">
          <ion-card [class.premium]="page.value === ProfileMenuItem.PREMIUM"
                    (click)="openProfilePage(page)"
          >
            <ion-card-header>
              <ion-card-subtitle>
                <ion-icon [name]="page.icon"></ion-icon>
              </ion-card-subtitle>
            </ion-card-header>

            <ion-card-content class="ion-padding !text-ellipsis">
              <ion-label class="ion-padding">
                {{ page.label }}
              </ion-label>
            </ion-card-content>

          </ion-card>
        </ion-col>
      }
    </ion-row>
  </ion-grid>
</ion-content>
<log-out class="bg-[#b3bac0]"></log-out>

<ion-popover #popover
             [isOpen]="isBreadCrumbPopoverOpen"
             (didDismiss)="isBreadCrumbPopoverOpen = false"
>
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item
          *ngFor="let breadcrumb of collapsedBreadcrumbs; last as isLast"
          [href]="breadcrumb?.url"
          [lines]="isLast ? 'none' : null"
        >
          <ion-label>{{ breadcrumb?.label }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>

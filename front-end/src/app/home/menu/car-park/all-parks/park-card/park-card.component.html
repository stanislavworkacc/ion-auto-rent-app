<ion-card (click)="selectParking()">
  <ion-card-header class="p-[10px] !flex" >
    <div class="flex items-center gap-2 max-w-[75%]">
      <div class="flex flex-col w-full">
        <ion-card-subtitle #subtitle
                           [ngClass]="{'truncate-title': !isSubtitleExpanded(), 'expand-title': isSubtitleExpanded()}"
                           (click)="toggleSubtitleExpand()"
        >{{ parking.location }}
          @if(isSubtitleTruncated()) {
          <ion-icon name="caret-down-outline"></ion-icon>
          }
        </ion-card-subtitle>
        <ion-card-title #title
                        class="text-sm capitalize"
                        [ngClass]="{'truncate-title': !isTitleExpanded(), 'expand-title': isTitleExpanded()}"
                        (click)="toggleTitleExpand()">
          {{ parking.label }}
          @if(isTitleTruncated()) {
            <ion-icon name="caret-down-outline"></ion-icon>
          }
        </ion-card-title>
      </div>
    </div>

    <div class="absolute top-[10%] right-[5%]">
      @if (!uploadedLogoUrl) {
        <img src="assets/icon/default-img.png" class="h-[50px] w-[50px]">
      } @else {
        <img [src]="uploadedLogoUrl" class="h-[60px] w-[60px]">
      }
    </div>
  </ion-card-header>

  <ion-card-content>
    <div class="flex items-center pb-1">
      <div class="flex flex-col">
        <div class="flex items-center mt-2">
          <ion-icon name="checkbox-outline" class="text-gray-500 mr-1"></ion-icon>
          <span class="text-sm text-gray-700">Успішних угод: {{ parking.freeCars }}</span>
        </div>
        <div class="flex items-center mt-2">
          <ion-icon name="car-outline" class="text-gray-500 mr-1"></ion-icon>
          <span class="text-sm text-gray-700">Вільних авто: {{ parking.freeCars }}</span>
        </div>
        <div class="flex items-center mt-2">
          <ion-icon name="car-outline" class="text-gray-500 mr-1"></ion-icon>
          <span class="text-sm text-gray-700">В оренді: {{ parking.freeCars }}</span>
        </div>
      </div>
    </div>

    <hr>

    <div  class="absolute bottom-[-20px] left-[3%]">
      <schedule-range [disable]="true"></schedule-range>
    </div>

    @if (editMode) {
      <ion-buttons class="absolute bottom-[-23px] right-[3%] flex items-center gap-0">
        <ion-button fill="clear" class="text-xs">
          <div class="flex flex-col items-center border rounded p-1">
            <img src="assets/icon/svg/edit-svg.svg" class="h-[20px]">
          </div>
        </ion-button>
        <ion-button fill="clear" class="text-xs">
          <div class="flex flex-col items-center border rounded p-1">
            <img src="assets/icon/svg/delete.svg" class="h-[20px]">
          </div>
        </ion-button>
      </ion-buttons>
    } @else {
      <div class="absolute bottom-[-23px] right-[5%] flex items-center gap-2">
        <ion-icon name="chatbubble" class="text-[24px] border rounded p-1"></ion-icon>
        <ion-icon name="person-circle" class="text-[25px] text-[#ed520d] border rounded p-1"></ion-icon>
      </div>
    }

  </ion-card-content>
</ion-card>

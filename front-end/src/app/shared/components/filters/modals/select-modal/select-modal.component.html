<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <app-close-btn [btnStyles]="'!w-[20px]'" [color]="'gray'" (click)="closeModal()"></app-close-btn>
    </ion-buttons>

    <ion-label class="text-gray-400 flex justify-center pl-[25px] font-[300]">{{ title }}</ion-label>

    <ion-buttons slot="end">
      <ion-label (click)="submitSelection()" class="text-gray-400">Обрати</ion-label>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (withSearch) {
    <ion-searchbar
      placeholder="Пошук"
      show-cancel-button="focus"
      show-clear-button="never"
      cancel-button-text="Скасувати"
    >
    </ion-searchbar>
  }
  <ion-list>
    <ion-radio-group
      [value]="selectedValue()"
      (ionChange)="onSelectChange($event.target.value)"
    >
      @for(item of visibleItems(); track item.value) {
        <ion-item class="text-gray-400" lines="none">
          @if (item.icon) {
            <img [src]="item.icon" class="w-[40px] mr-2">
          }
          <ion-radio [value]="item" justify="space-between">{{ item.name ?? item.label }}</ion-radio>
        </ion-item>
      }
    </ion-radio-group>
    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMoreData($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="Завантаження ще...">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ion-list>
</ion-content>
